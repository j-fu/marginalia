<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/marginalia/libs/highlight/github.min.css"> <link rel=stylesheet  href="/marginalia/css/franklin.css"> <link rel=stylesheet  href="/marginalia/css/poole_lanyon.css"> <link rel=stylesheet  href="/marginalia/css/adjust.css"> <link rel=icon  href="/marginalia/assets/favicon.png"> <title>Version control with mercurial</title> <input type=checkbox  class=sidebar-checkbox  id=sidebar-checkbox > <div class=sidebar  id=sidebar > <div class=sidebar-item > <p>Marginalia</p> </div> <nav class=sidebar-nav > <a class="sidebar-nav-item " href="/marginalia/">Home</a> <a class="sidebar-nav-item " href="/marginalia/julia/">Julia</a> <a class="sidebar-nav-item " href="/marginalia/git/">Git</a> <a class="sidebar-nav-item " href="/marginalia/older-posts/">Older posts</a> </nav> <div class=sidebar-item > <p>&copy; Jürgen Fuhrmann.</p> </div> </div> <!-- Wrap is the content to shift when toggling the sidebar. We wrap the content to avoid any CSS collisions with our real content. --> <div class=wrap > <div class=masthead > <div class=container > <h3 class=masthead-title > <a href="/marginalia/" title=Home >Marginalia</a> </h3> </div> </div> </div> <div class="container content"> <div class=franklin-content ><h1 id=version_control_with_mercurial ><a href="#version_control_with_mercurial" class=header-anchor >Version control with mercurial</a></h1> <p>&#40;2014-10-30, update 2016-09-14&#41;</p> <p>The main open source choices for source code version control systems &#40;VCS&#41; are the centralized VCS <a href="http://savannah.nongnu.org/projects/cvs">CVS</a> and subversion <a href="http://subversion.apache.org/">&#40;svn&#41;</a>, and the distributed VCS <a href="http://git-scm.com/">git</a> and Mercurial <a href="http://mercurial-scm.org/">&#40;hg&#41;</a>.</p> <p>I am taking sides with mercurial, as it is distributed and has a more intuitive command line interface and better portability than git.</p> <p><a href="http://www.youtube.com/watch?v&#61;4XpnKHJAok8">Linus Torvalds at Google in 2007:</a> &quot;Subversion has been the most pointless project ever started... Subversion used to say, &#39;CVS done right.&#39; With that slogan there is nowhere you can go. There is no way to do CVS right.&quot; Probably he is not completely wrong. As from this choice only git and mercurial are distributed version control systems, the choice is between them, unless you are using some features of svn they don&#39;t provide &#40;e.g. checking out subdirectories&#41;.</p> <p>Please be aware that git is more widespread and it seems that for this reason there are more tools on top of it. Some more colloquial take on the comparison between them you find <a href="http://importantshock.wordpress.com/2008/08/07/git-vs-mercurial/">here</a>.</p> <h2 id=introduction ><a href="#introduction" class=header-anchor >Introduction</a></h2> <ul> <li><p><a href="http://mercurial-scm.org/">Mercurial home page</a></p> <li><p><a href="http://mercurial-scm.org/wiki/QuickStart">Quick start</a></p> <li><p><a href="http://mercurial-scm.org/wiki/Tutorial">Tutorial</a></p> <li><p><a href="http://mercurial.aragost.com/kick-start/en/">Kickstart</a> ... seems to be so far the best of these tutorials.</p> </ul> <p>Mercurial &#40;hg&#41; is implemented in python and works on most modern operating systems &#40;Linux, Windows, Mac&#41;.</p> <p>Before starting, create a file named <code>.hgrc</code> in your home directory containing</p> <pre><code class="julia hljs">[ui]
username = Ann User &lt;ann.user<span class=hljs-meta >@example</span>.com&gt;</code></pre> <p>In Mercurial, unlike in subversion there is no division between &quot;sandbox&quot; and &quot;repository&quot;. Any instance you work with contains both. So in every &quot;sandbox&quot; there is a hidden &quot;repository&quot; &#40;in the .hg subdirectory of the top level direcrory&#41;.</p> <p>You can clone any given instance. Clone commands can using several kinds of access</p> <p>hg clone http://some.host.atyourinstitute.de:port directoy_to_be_created hg clone file://some_directory_on_your_disc directoy_to_be_created hg clone ssh://some_directory_on_your_remote directoy_to_be_created</p> <p>There is no a prioi defined master repository. All descendants of the initial repository have the same rights and allow transfer operations between any of them. Therefore it is possible that two people work together using <code>hg</code> and after finishing their joint work, they release it to the others in the project. This is believed to be the main advantage of distributed version control in opposite to the centralized model represented by <code>svn</code>.</p> <h2 id=installation ><a href="#installation" class=header-anchor >Installation</a></h2> <p>If the command <code>hg</code> is not available on your system, install mercurial using your favorite package manager.</p> <h2 id=basic_commands ><a href="#basic_commands" class=header-anchor >Basic commands </a></h2> <ul> <li><p><code>hg help</code>: Print help information</p> <li><p><code>hg commit</code>: Check in changes <em>locally</em> i.e. this does not affect the remote repository</p> <li><p><code>hg push</code>: transfer all recent changes to the remote repository </p> <li><p><code>hg pull</code>: gets actual changes from the remote repository the hidden local repository</p> <li><p><code>hg update</code>: update the local sandbox from the local repository</p> <li><p><code>hg merge</code>: brings changes together</p> <li><p><code>hg add</code>: adds files</p> <li><p><code>hg rm</code>: deletes files</p> <li><p><code>hg forget</code>: forgets unintentionally added files</p> <li><p><code>hg revert</code>: re-establishes last commited revision</p> <li><p><code>hg mv</code>: moves/renames files</p> <li><p><code>hg init</code>: set up a new repository </p> <li><p><code>hg serve</code>: set up a mini webserver accessible via <code>http://localhost:8000</code> which allows to browse the repository and all versions</p> </ul> <p>Yes, there are also branches.</p> <h2 id=master_repository_workflow ><a href="#master_repository_workflow" class=header-anchor >Master repository workflow</a></h2> <p>The structure of Mercurial allows to define different <a href="http://mercurial-scm.org/wiki/Workflows">workflow patterns</a> &#40;<a href="http://git-scm.com/book/en/v2/Distributed-Git-Distributed-Workflows">git version</a>&#41;. The simplest and most obvious one for people coming from CVS or svn is a workflow around one central master repository. </p> <p>The pattern goes as follows:</p> <ol> <li><p>Clone the master repository and change into directory.</p> </ol> <pre><code class="julia hljs">hg clone url localdir
  cd localdir</code></pre> <ol start=2 > <li><p>Pull the latest changes from the master:</p> </ol> <pre><code class="julia hljs">hg pull
  hg update
  hg merge</code></pre> <ol start=3 > <li><p>Modify/merge the code. You can commit intermediate changes</p> </ol> <p>without affecting the master repository with</p> <pre><code class="julia hljs">hg commit</code></pre>
<p>This command asks for a short commit message.   To add new files to the VCS, before committing use</p>
<pre><code class="julia hljs">hg add filename</code></pre>
<ol start=4 >
<li><p>Test the code. If changes are necessary, repeat step 3.</p>

<li><p>Repeat step 2 to be sure to have the latest updates.</p>

<li><p>Test again, to be sure that the most recent changes form the master are compatible with your</p>

</ol>
<p> work.</p>
<ol start=7 >
<li><p>Push the changes to the remote repository</p>

</ol>
<pre><code class="julia hljs">hg push</code></pre>
<h3 id=notification ><a href="#notification" class=header-anchor >Notification</a></h3>
<p>The  maintainer  of  the  master  repository  has  the  possibility  to configure email notifications.</p>
<div class=page-foot >
  <div class=copyright >
    &copy; Jürgen Fuhrmann. License: <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode"> CC-BY-SA 4.0</a>. Last modified: April 27, 2023. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
Upon finding factual errors, typos etc. <a href=https://github.com/j-fu/marginalia/issues> raise an issue<a>.
<center>  <a href="/marginalia/feed.xml"> <img src="/marginalia/assets/rss.png" style="width:100px;"></a> </center>
  </div>
</div>


</div>
      </div>  
    </div> 
    
    
        


    
    <label for=sidebar-checkbox  class=sidebar-toggle ></label>